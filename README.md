Занятие 89 - домашнее задание
 
Добавляем "роль" у пользователя. Ролей может быть две:

Администратор

Пользователь

По-умолчанию при регистрации пользователь получает роль "Пользователь".

 

Если у вас раньше не было фикстур, добавляем фикстуры в приложение:

Исполнители (2-3 штуки) с фото

Альбомы (по 1-2 для каждого исполнителя) с обложкой

Треки (по 5-10 для каждого альбома)

Пользователи 2 шт. - по 1 для каждой роли

 

Добавьте в интерфейс приложения формы добавления:

Исполнителей

Альбомов

Треков

 

У обычного "Пользователя" в меню появляются ссылки на эти три формы.

 

При этом каждая форма должна удобным способом обеспечивать создание соответствующих сущностей.

Создание альбома должно содержать выбор исполнителя с помощью <select>-а.

Создание трека должно содержать выбор альбома с помощью <select>-а

Дополнительно: При создании трека сделайте два <select>-а - один для исполнителя, второй - для альбома. При выборе исполнителя подгружаются альбомы этого исполнителя и подставляются в выбор альбома.

 

Созданные сущности должны иметь по-умолчанию поле "опубликовано" равным false.

 

"Пользователи" видят только "опубликованные" сущности - будь то исполнители, альбомы или треки.

Дополнительно: "Пользователи" видят также собственные неопубликованные сущности с пометкой "неопубликовано"

 

"Администраторы" видят все сущности. У неопубликованных сущностей должна отображаться пометка "неопубликовано".

Вариант: Для администраторов сделать дополнительный интерфейс со списком-таблицей, где видны все сущности. Можно сделать дополнительные API endpoints для этого интерфейса.

 

У "Администраторов" для всех сущностей отображается кнопка "Удалить". Для неопубликованных сущностей отображается кнопка "Опубликовать".

 

При нажатии на кнопку "Удалить" производится удаление выбранной сущности. При этом проверяется на API, что действие производит администратор.

 

При нажатии на кнопку "Опубликовать" производится изменение поля "опубликовано" выбранной сущности с false на true

